(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2167:function(e,t,s){Promise.resolve().then(s.t.bind(s,6685,23)),Promise.resolve().then(s.bind(s,6157)),Promise.resolve().then(s.bind(s,4225))},5162:function(e,t,s){"use strict";s.d(t,{q:function(){return w}});var n=s(7437),l=s(2265),r=s(4225),a=s(6446),i=s(6521),c=s(4033),o=s(6230),u=s(6450);let d=e=>{let t=new Date(e),s=t.getDate();return t.getMonth()+"-"+s+"-"+t.getFullYear()},x=e=>{let{article:t}=e,{title:s,description:x,createDateTime:h}=t,{deleteArticle:m,articles:f}=(0,l.useContext)(r.ArticlesContext),{open:w,setOpen:j,setModalType:C,setInputs:p}=(0,l.useContext)(o.t),b=(0,c.usePathname)(),v=(0,l.useMemo)(()=>b.includes("admin"),[b]),N=(e,t)=>{C("edit"),p(e,t),j(!0)},g=async e=>{try{await (0,u.r)("http://localhost:3001/articles/".concat(e),"DELETE"),m(e)}catch(e){console.warn(e)}};return(0,n.jsxs)("div",{className:"bg-white rounded-md drop-shadow-md p-6 w-full max-w-sm flex flex-col",children:[(0,n.jsx)("h3",{className:"font-bold text-xl text-[#242424]",children:t.title}),(0,n.jsx)("p",{className:"text-base text-[#6b6b6b]",children:t.description}),(0,n.jsxs)("div",{className:"mt-auto",children:[v&&(0,n.jsxs)("div",{className:"my-2 justify-between flex",children:[(0,n.jsx)(i.Z,{onClick:()=>N(t.id,{title:s,description:x}),className:"hover:cursor-pointer"}),(0,n.jsx)(a.Z,{onClick:()=>g(t.id),className:"hover:cursor-pointer"})]}),(0,n.jsx)("span",{className:"inline-flex text-slate-400 text-xs",children:d(h)})]})]})};var h=s(4211);let m=()=>{let{setSearchString:e,articles:t,setStoredArticles:s}=(0,l.useContext)(r.ArticlesContext),a=n=>{n.length>=3&&e(n),n||s(t)};return(0,n.jsx)("form",{onSubmit:e=>{e.preventDefault(),console.log("submit")},className:"grid w-full max-w-4xl  bg-white rounded-md p-2 shadow-md  flex-1 md:flex-initial",children:(0,n.jsx)("input",{placeholder:"Search",className:" outline-none p-2 w-full",type:"text",onChange:e=>a(e.target.value)})})},f=()=>{let{sortArticleByDate:e}=(0,l.useContext)(r.ArticlesContext);return(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsxs)("div",{className:"w-full max-w-4xl flex",children:[(0,n.jsx)(m,{}),(0,n.jsx)(h.Z,{onClick:e,variant:"outlined",style:{width:200,marginLeft:15},children:"Sort by Date"})]})})},w=()=>{let{storedArticles:e,loading:t,searchString:s,searchArticle:a}=(0,l.useContext)(r.ArticlesContext),i=(0,c.usePathname)(),o=(0,l.useMemo)(()=>i.includes("admin"),[i]);return(0,l.useEffect)(()=>{s&&a(s)},[s]),(0,n.jsxs)("div",{className:"mt-6",children:[e.length>0&&(0,n.jsx)(f,{}),(0,n.jsxs)("div",{className:"flex justify-center",children:[t&&(0,n.jsx)("h2",{children:"Loading......."}),o?(0,n.jsx)("h4",{children:"Click plus button to add your first article"}):(0,n.jsx)("h2",{className:"flex justify-center",children:"There is no article to show"}),(0,n.jsx)("div",{className:"grid grid-cols-3 gap-4 w-full max-w-4xl py-6",children:e&&e.map(e=>(0,n.jsx)(x,{article:e},e.id))})]})]})}},6157:function(e,t,s){"use strict";s.r(t),s.d(t,{Dashboard:function(){return a}});var n=s(7437),l=s(4225),r=s(5162);let a=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.ArticlesContextProvider,{children:(0,n.jsx)(r.q,{})})})},4225:function(e,t,s){"use strict";s.r(t),s.d(t,{ArticlesContext:function(){return c},ArticlesContextProvider:function(){return o}});var n=s(7437),l=s(2265),r=s(6450);let a=()=>{let[e,t]=(0,l.useState)([]),[s,n]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{n(!0),async function(){try{let e=await (0,r.r)("http://localhost:3001/articles","GET");e&&t(e)}catch(e){console.warn(e)}n(!1)}()},[]),{articles:e,loading:s,setArticles:t}},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"newest";return e.sort((e,s)=>"newest"===t?Number(new Date(s.createDateTime))-Number(new Date(e.createDateTime)):Number(new Date(e.createDateTime))-Number(new Date(s.createDateTime)))},c=(0,l.createContext)({}),o=e=>{let{children:t}=e,{articles:s,loading:r,setArticles:o}=a(),[u,d]=(0,l.useState)("newest"),[x,h]=(0,l.useState)([]),[m,f]=(0,l.useState)("");(0,l.useEffect)(()=>{s.length>0&&h(i(s))},[s]);let w=(0,l.useCallback)(e=>{let t=s.filter(t=>t.id!==e);o(t)},[s,o]),j=(0,l.useCallback)(e=>{o(t=>[...t,e])},[o]),C=(0,l.useCallback)((e,t)=>{let n=s.map(s=>(s.id===e&&(s.title=t.title,s.description=t.description),s));o(n)},[o,s]),p=(0,l.useCallback)(e=>{h([...s.filter(t=>t.title.toLowerCase().includes(e.toLowerCase()))])},[s,o]),b=(0,l.useCallback)(()=>{v()},[u,x]),v=(0,l.useCallback)(()=>"newest"===u?(d("oldest"),h(i(s,"oldest"))):(d("newest"),h(i(s,"newest"))),[u,x]);return(0,n.jsx)(c.Provider,{value:{articles:s,loading:r,deleteArticle:w,addArticle:j,updateArticle:C,searchArticle:p,searchString:m,setSearchString:f,storedArticles:x,setStoredArticles:h,sortArticleByDate:b},children:t})}},6230:function(e,t,s){"use strict";s.d(t,{n:function(){return a},t:function(){return r}});var n=s(7437),l=s(2265);let r=(0,l.createContext)({}),a=e=>{let{children:t}=e,[s,a]=(0,l.useState)(!1),[i,c]=(0,l.useState)("add"),[o,u]=(0,l.useState)({});return(0,n.jsx)(r.Provider,{value:{open:s,setOpen:a,handleOpen:()=>a(!0),handleClose:()=>a(!1),modalType:i,setModalType:c,inputs:o,setInputs:u},children:t})}},6450:function(e,t,s){"use strict";s.d(t,{r:function(){return n}});let n=async(e,t,s)=>{let n=localStorage.getItem("accessToken")?JSON.parse(localStorage.getItem("accessToken")):null,l=await fetch(e,{method:t,body:s&&JSON.stringify(s),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});return l.json()}}},function(e){e.O(0,[807,933,971,596,744],function(){return e(e.s=2167)}),_N_E=e.O()}]);